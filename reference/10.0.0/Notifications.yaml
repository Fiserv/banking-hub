openapi: 3.0.0
info:
  title: Notifications.API 1.0
  description: Notifi Alert Hub REST API
  contact:
    name: DC Team - The Primes
    email: DC-Team-ThePrimes@fiserv.com
  version: 1.0.0
servers:
- url: https://swaggerhub.onefiserv.net/virts/Tracy.SeguraJimenez/Notifications/1.0.0
- url: http://swaggerhub.onefiserv.net/virts/Tracy.SeguraJimenez/Notifications/1.0.0
paths:
  /api/users/{eapUserId}/subscriptions:
    get:
      tags:
      - Get User Subscription List
      summary: Returns a list of user subscriptions.
      operationId: Users_GetUserAlertSubscriptions
      parameters:
      - name: eapUserId
        in: path
        description: The eapUserId of the subscriptions to return.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 396384
      - name: api-version
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "1"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionDto'
              examples:
                GetSubscription:
                  $ref: '#/components/examples/GetSubscription'
            text/json:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
            application/xml:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
            text/xml:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
        "400":
          description: Bad request
        "404":
          description: Not Found
        "500":
          description: Internal Server Error
    post:
      tags:
      - Add User Subscription
      summary: Adds a new subscription to a user
      operationId: Users_AddUserAlertSubscription
      parameters:
      - name: eapUserId
        in: path
        description: The eapUserId of the subscriptions to return.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 396383
      - name: api-version
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "1"
      requestBody:
        description: The Alert subscription candidate
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionCandidateDto'
            examples:
              CreateSubscription:
                $ref: '#/components/examples/CreateSubscription'
          text/json:
            schema:
              $ref: '#/components/schemas/SubscriptionCandidateDto'
          application/xml:
            schema:
              $ref: '#/components/schemas/SubscriptionCandidateDto'
          text/xml:
            schema:
              $ref: '#/components/schemas/SubscriptionCandidateDto'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SubscriptionCandidateDto'
        required: true
      responses:
        "201":
          description: Created
          content:
            application/json:
              schema:
                type: object
                example: "772713"
            text/json:
              schema:
                type: object
            application/xml:
              schema:
                type: object
            text/xml:
              schema:
                type: object
        "400":
          description: Bad request
        "500":
          description: Internal Server Error
  /api/users/{eapUserId}/subscription/{subscriptionId}:
    get:
      tags:
      - Get User Subscription using Account
      summary: Retrieves subscription with plain Account number.
      operationId: Users_GetSubscriptionById
      parameters:
      - name: eapUserId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 396353
      - name: subscriptionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 772714
      - name: api-version
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "1"
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
              examples:
                GetSubscriptionByAccount:
                  $ref: '#/components/examples/GetSubscriptionByAccount'
            text/json:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
            application/xml:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
            text/xml:
              schema:
                $ref: '#/components/schemas/SubscriptionAccountResponseDto'
        "404":
          description: Not Found
  /api/users/{eapUserId}/subscriptions/{subscriptionId}:
    put:
      tags:
      - Update User Subscription
      summary: Updates a user subscription
      operationId: Users_UpdateUserAlertSubscription
      parameters:
      - name: eapUserId
        in: path
        description: The eapUserId of the subscriptions to return.
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 396731
      - name: subscriptionId
        in: path
        description: The id of the alert subscription
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 773026
      - name: api-version
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "1"
      requestBody:
        description: the data to be patched
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubscriptionPatchDto'
            examples:
              UpdateSubscription:
                $ref: '#/components/examples/UpdateSubscription'
          text/json:
            schema:
              $ref: '#/components/schemas/SubscriptionPatchDto'
          application/xml:
            schema:
              $ref: '#/components/schemas/SubscriptionPatchDto'
          text/xml:
            schema:
              $ref: '#/components/schemas/SubscriptionPatchDto'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/SubscriptionPatchDto'
        required: true
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: object
            text/json:
              schema:
                type: object
            application/xml:
              schema:
                type: object
            text/xml:
              schema:
                type: object
        "400":
          description: Bad request
        "500":
          description: Internal Server Error
    patch:
      tags:
      - Update User Alert Subscription Status
      summary: Updates the status of an user alert subscription
      operationId: Users_UpdateUserAlertSubscriptionStatus
      parameters:
      - name: eapUserId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 396385
      - name: subscriptionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: integer
          format: int64
          example: 772715
      - name: enabled
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: boolean
          example: true
      - name: deleted
        in: query
        required: true
        style: form
        explode: true
        schema:
          type: boolean
          example: true
      - name: api-version
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          example: "1"
      responses:
        "204":
          description: No Content
          content:
            application/json:
              schema:
                type: object
            text/json:
              schema:
                type: object
            application/xml:
              schema:
                type: object
            text/xml:
              schema:
                type: object
        "400":
          description: Bad request
        "500":
          description: Internal Server Error
components:
  schemas:
    AccountDto:
      type: object
      properties:
        id:
          type: string
          description: Gets or sets the identifier.
        accountNumber:
          type: string
          description: Gets or sets a value of type {System.String} indicating AccountNumber
        accountType:
          type: string
          description: Gets or sets a value of type {System.String} indicating AccountType
        accountNickName:
          type: string
          description: Gets or sets a value of type {System.String} indicating AccountNickName
        displayAccountLongName:
          type: string
          description: Gets or sets a value of type {System.String} indicating DisplayAccountLongName
        accountNumberMasked:
          type: string
          description: Gets or sets a value of type {System.String} indicating AccountNumberMasked
      description: Data transfer object used to pass Account information
    AccountTypeDto:
      type: object
      properties:
        description:
          type: string
          description: Description of the Account Type
        type:
          type: string
          description: The type of Account Type
      description: Account Type
    AlertTypeDto:
      type: object
      properties:
        alertTypeId:
          type: string
        name:
          type: string
        category:
          type: string
        accountLevel:
          type: boolean
        thresholdNeeded:
          type: boolean
        actionable:
          type: boolean
        autoEnroll:
          type: boolean
        mandatory:
          type: boolean
        subscriptionless:
          type: boolean
        description:
          type: string
        enabled:
          type: boolean
        properties:
          type: array
          items:
            $ref: '#/components/schemas/PropertyDto'
        endpointTypes:
          type: array
          items:
            $ref: '#/components/schemas/EndpointTypeDto'
        relationships:
          type: array
          items:
            $ref: '#/components/schemas/RelationshipDto'
        accountTypes:
          type: array
          items:
            $ref: '#/components/schemas/AccountTypeDto'
        templates:
          type: array
          items:
            $ref: '#/components/schemas/TemplateDto'
        alertTypeCategory:
          $ref: '#/components/schemas/AlertTypeCategoryDto'
    PropertyDto:
      type: object
      properties:
        id:
          type: string
          description: The id of the property
        name:
          type: string
          description: The name of the property
        value:
          type: string
          description: The value of the property
        type:
          type: string
          description: Type of the property (e.g. Threshold)
        inherited:
          type: boolean
          description: The property is inherited in the entity hierarchy
      description: Used to add properties to the database from Web API
    EndpointTypeDto:
      type: object
      properties:
        type:
          type: string
          description: The type of endpoint
        enabled:
          type: boolean
          description: The status of an endpoint type
      description: Tenant Endpoint Type
    RelationshipDto:
      type: object
      properties:
        name:
          type: string
          description: The type of relationship
        description:
          type: string
          description: the description of the type of relationship
        inherited:
          type: boolean
          description: Identify relationship is inherited or not.
      description: Represents a Relationship
    TemplateDto:
      type: object
      properties:
        endpointType:
          type: string
          description: Gets or sets the endpoint type.
        text:
          type: string
          description: Gets or sets the text.
        inherited:
          type: boolean
      description: Used to add templates to the database from Web API
    AlertTypeCategoryDto:
      type: object
      properties:
        alertTypeCategoryId:
          type: string
          description: The id of the alert Category
        alertCategoryName:
          type: string
          description: Category Name
        longDescription:
          type: string
          description: the Long description of the category
        shortDescription:
          type: string
          description: the Short description of the category
        inherited:
          type: boolean
          description: Inherited
      description: Class for all details of tenant alert category.
    PropertyPatchDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the property
        value:
          type: string
          description: The value of the property
        type:
          type: string
          description: The type of the property
      description: Used for updating properties
    PropertyCandidateDto:
      type: object
      properties:
        name:
          type: string
          description: The name of the property
        value:
          type: string
          description: The value of the property
        type:
          type: string
          description: The Type of the Property
      description: Used to add properties to the database from Web API
    SubscriptionDto:
      type: object
      properties:
        subscriptionId:
          type: string
          description: The ID of the alert subscription
        enabled:
          type: boolean
          description: The status of the alert subscription
        alertType:
          $ref: '#/components/schemas/AlertTypeDto'
        profile:
          $ref: '#/components/schemas/SubscriptionProfileDto'
        endpointIds:
          type: array
          description: List of endpoint IDs associated to the alert subscription
          items:
            type: string
      description: Defines an Alert Subscription
    SubscriptionProfileDto:
      type: object
      properties:
        properties:
          type: array
          description: List of properties to associate to the subscription
          items:
            $ref: '#/components/schemas/PropertyDto'
        accountGroup:
          $ref: '#/components/schemas/AccountGroupDto'
        accessGroup:
          $ref: '#/components/schemas/AccessGroupDto'
        partyEventGroup:
          $ref: '#/components/schemas/PartyEventGroupDto'
    AccountGroupDto:
      type: object
      properties:
        accountGroupId:
          type: string
        name:
          type: string
        type:
          type: string
        accounts:
          type: array
          items:
            $ref: '#/components/schemas/AccountDto'
      description: Represents an Account Group
    AccessGroupDto:
      type: object
      properties:
        accessGroupId:
          type: string
        name:
          type: string
        type:
          type: string
        accessIds:
          type: array
          items:
            type: string
      description: Represents a Access Group
    PartyEventGroupDto:
      type: object
      properties:
        partyEventGroupId:
          type: string
        name:
          type: string
        type:
          type: string
        eventUserIds:
          type: array
          items:
            type: string
      description: Represents a Party Event Group
    SubscriptionCandidateDto:
      type: object
      properties:
        alertTypeName:
          type: string
          description: The name of the alert type
        enabled:
          type: boolean
          description: the status of the subscription
        endpointIds:
          type: array
          description: Endpoints associated with the subscription
          items:
            type: string
        profile:
          $ref: '#/components/schemas/SubscriptionProfileCandidateDto'
      description: Represents the data needed to attempt to create a new alert subscription
    SubscriptionProfileCandidateDto:
      type: object
      properties:
        properties:
          type: array
          description: List of properties to associate to the subscription
          items:
            $ref: '#/components/schemas/PropertyCandidateDto'
        accountGroup:
          $ref: '#/components/schemas/AccountGroupDto'
        accessGroup:
          $ref: '#/components/schemas/AccessGroupDto'
        partyEventGroup:
          $ref: '#/components/schemas/PartyEventGroupDto'
    SubscriptionAccountResponseDto:
      type: object
      properties:
        subscriptionId:
          type: integer
          format: int64
        eapUserId:
          type: integer
          format: int64
        accountNumber:
          type: string
        accountType:
          type: string
      description: Reprsent the Response of {Notifi.API.v1.Dtos.SubscriptionAccountResponseDto}
    SubscriptionPatchDto:
      type: object
      properties:
        endpointIds:
          type: array
          description: The new listed of endpoints tied to the subscription
          items:
            type: string
        properties:
          type: array
          description: New list of properties associated with the subscription
          items:
            $ref: '#/components/schemas/PropertyPatchDto'
      description: Represents the data that is used to update an Alert Subscription
  examples:
    GetSubscription:
      value:
      - subscriptionId: 772714
        enabled: true
        alertType:
          alertTypeId: 929
          name: ABOVEBALTHRESH
          category: AccountAlert
          accountLevel: true
          thresholdNeeded: true
          actionable: false
          autoEnroll: false
          mandatory: false
          subscriptionless: false
          description: 'Account balance above threshold '
          enabled: true
          properties:
          - id: 165
            name: ThresholdValue
            value: MemoBalAmt
            type: Threshold
            inherited: false
          - id: 11445
            name: ActionType
            value: Transfer
            type: Actionable
            inherited: true
          - id: 11453
            name: Button1Text
            value: Transfer
            type: Actionable
            inherited: true
          - id: 11457
            name: Button2Text
            value: Cancel%20Transfer
            type: Actionable
            inherited: true
          - id: 11109
            name: EmailSubject
            value: Your%20account%20balance%20is%20above%20your%20threshold
            type: Base
            inherited: true
          - id: 11449
            name: NotificationTitle
            value: Transfer
            type: Actionable
            inherited: true
          - id: 13910
            name: SubscriptionBuilderCategory
            value: Balance%20%26%20Transactions
            type: SubscriptionBuilder
            inherited: true
          - id: 26183
            name: SubscriptionBuilderMultiValuedThreshold
            value: "False"
            type: SubscriptionBuilder
            inherited: true
          - id: 12190
            name: SubscriptionBuilderPostText
            value: ""
            type: SubscriptionBuilder
            inherited: true
          - id: 11846
            name: SubscriptionBuilderPreText
            value: Balance%20amount%20above%20threshold
            type: SubscriptionBuilder
            inherited: true
          - id: 13222
            name: SubscriptionBuilderThresholdInput
            value: ""
            type: SubscriptionBuilder
            inherited: true
          - id: 25829
            name: SubscriptionBuilderThresholdInputType
            value: Currency
            type: SubscriptionBuilder
            inherited: true
          - id: 14254
            name: SubscriptionBuilderType
            value: Account
            type: SubscriptionBuilder
            inherited: true
          - id: 11397
            name: ThresholdComparison
            value: '%3E'
            type: Base
            inherited: true
          - id: 11421
            name: ThresholdFormat
            value: Currency
            type: Base
            inherited: true
          endpointTypes:
          - type: Email
            enabled: true
          - type: SMS
            enabled: true
          - type: Push
            enabled: true
          - type: SecuredInbox
            enabled: true
          relationships:
          - name: Business
            inherited: false
          accountTypes: []
          templates: []
          alertTypeCategory:
            alertTypeCategoryId: 1
            alertCategoryName: Balance
            longDescription: Low balance alerts can help you avoid overdrafts or maintain
              balances to qualify for rewards. High balance alerts can help you identify
              when you might want to transfer or invest money.
            inherited: false
        profile:
          properties:
          - id: 587709
            name: ThresholdValue
            value: 10
            type: Threshold
            inherited: false
          - id: 587710
            name: CorrelationId
            value: 67641317-d0e9-4c70-bdac-50016072eac0
            type: Base
            inherited: false
          accountGroup:
            accountGroupId: 0
            name: UNKNOWN
            type: White
            accounts:
            - id: 233824
              accountNumber: 20200501
              accountType: DDA
              accountNickName: My First Checking Account
              accountNumberMasked: '*0501'
        endpointIds:
        - 241961
    GetSubscriptionByAccount:
      value:
        subscriptionId: 772714
        eapUserId: 396353
        accountNumber: "20200501"
        accountType: DDA
    CreateSubscription:
      value:
        alertTypeName: ABOVEBALTHRESH
        enabled: true
        endpointIds:
        - "241960"
        profile:
          properties:
          - name: ThresholdValue
            value: "10"
            type: Threshold
          accountGroup:
            accounts:
            - id: "0"
              accountNumber: "20200501"
              accountType: DDA
              accountNickName: My First Checking Account
          eventUserIds: "0"
    UpdateSubscription:
      value:
        endpointIds:
        - 242344
        properties:
        - id: "0"
          name: ThresholdValue
          value: "200"
          type: Threshold
