openapi: 3.0.0
info:
  version: 1.0.0
  title: 'Transactions'
  description: >-
    The Transactions Service supports operations to add (POST) a financial transaction to 
    an account, request a closeout or payoff quote (POST) for an account, or to retrieve 
    (GET) details of a specific transaction.
servers:
  - url: https://swaggerhub.onefiserv.net/v1 
paths:
 
  /transactions/v1/{accountId}/quote:
    parameters:
      - name: accountId
        in: path
        required: true
        schema:
          type: string
      - name: Fiserv-OrganizationId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-OrganizationId'
      - name: Fiserv-TransactionId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-TransactionId'
      - name: Fiserv-ClientApplicationName
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientApplicationName'
      - name: Fiserv-Channel
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-Channel'
      - name: Fiserv-ClientDateTime
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientDateTime'
      - name: Fiserv-VendorId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-VendorId'
    get:
      description: >-
          Retrieves a closeout or payoff quote for a deposit or loan
          account
      tags:
        - Get Closeout or Payoff Quote
      x-group-name: Transactions Service
      x-proxy-name: Get Closeout or Payoff Quote
      x-child-product-name: ["Leve","Accounts and Transactions"]
      operationId: getTransactionQuote
      parameters:
        - name: quoteType
          in: query
          description: "This is the type of quote being requested."
          required: true
          schema:
            type: string
            enum:
              - close
              - payment
              - payoff
        - name: asOfDateTime
          in: query
          description: "Date and time the quote should be calculated as of."
          required: false
          schema:
            type: string
            format: date-time
      responses: 
        "200":
          description: Ok
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/GetTransactionQuoteResponse'
        default: 
          description: "Unexpected error"
          content:
            application/json:
              schema: 
                 $ref: '#/components/schemas/ErrorResponse'
  /transactions/v1:
    parameters:
      - name: Fiserv-OrganizationId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-OrganizationId'
      - name: Fiserv-TransactionId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-TransactionId'
      - name: Fiserv-ClientApplicationName
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientApplicationName'
      - name: Fiserv-Channel
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-Channel'
      - name: Fiserv-ClientDateTime
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientDateTime'
      - name: Fiserv-VendorId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-VendorId'
      - name: Fiserv-BranchCode
        in: header
        required: false
        schema:
          $ref: '#/components/schemas/BranchCode'
      - name: Fiserv-TellerCode
        in: header
        required: false
        schema:
          $ref: '#/components/schemas/TellerCode'
    post:
      description: >-
          Adds (post) a transaction to a deposit or loan account
      tags:
        - Add Transaction to Account
      x-group-name: Transactions Service
      x-proxy-name: Add Transaction to Account
      x-child-product-name: ["Leve","Accounts and Transactions"]
      operationId: addTransaction
      requestBody:
        description: Transactions
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddTransactionRequest'
      responses: 
        "201":
          description: Created
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/AddTransactionResponse'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                 $ref: '#/components/schemas/ErrorResponse'
        "409":
          description: Conflict
          content:
            application/json:
              schema:
                 $ref: '#/components/schemas/ErrorResponse'
        "422":
          description: Unprocessable Entity
          content:
            application/json:
              schema:
                 $ref: '#/components/schemas/ErrorResponse'
        default: 
          description: "Unexpected error"
          content:
            application/json:
              schema: 
                 $ref: '#/components/schemas/ErrorResponse'
  /transactions/v1/quote:
    parameters:
      - name: Fiserv-OrganizationId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-OrganizationId'
      - name: Fiserv-TransactionId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-TransactionId'
      - name: Fiserv-ClientApplicationName
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientApplicationName'
      - name: Fiserv-Channel
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-Channel'
      - name: Fiserv-ClientDateTime
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-ClientDateTime'
      - name: Fiserv-VendorId
        in: header
        required: true
        schema:
          $ref: '#/components/schemas/Fiserv-VendorId'
    post:
      description: >-
          Adds a closeout or payoff quote for a deposit or loan
          account
      tags:
        - Add Closeout or Payoff Quote
      x-group-name: Transactions Service
      x-proxy-name: Add Closeout or Payoff Quote
      x-child-product-name: ["Leve","Accounts and Transactions"]
      operationId: addTransactionQuote
      requestBody:
        description: Quote
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddTransactionQuoteRequest'
      responses: 
        "201":
          description: Created
          content:
            application/json:
              schema:
                  $ref: '#/components/schemas/AddTransactionQuoteResponse'
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                 $ref: '#/components/schemas/ErrorResponse'
        default: 
          description: "Unexpected error"
          content:
            application/json:
              schema: 
                 $ref: '#/components/schemas/ErrorResponse'
components:
  schemas:
    AddTransactionRequest:
      title: AddTransactionRequest
      type: object
      properties:
        transactions:
          type: array
          maxItems: 2
          description: >-
              List of transactions to process
          items:
            $ref: '#/components/schemas/Transaction'
    AddTransactionResponse:
      title: AddTransactionResponse
      type: object
      properties:
        transactionResults:
          type: array
          description: >-
              Results associated with the transactions that were presented
          items:
            $ref: '#/components/schemas/TransactionResult'
    AddTransactionQuoteRequest:
      title: AddTransactionQuoteRequest
      type: object
      properties:
        accountId:
          $ref: '#/components/schemas/AccountId'
        accountNumber:
          $ref: '#/components/schemas/AccountNumber'
        accountDetailType:
          $ref: '#/components/schemas/AccountDetailType'
        quoteType:
          type: string
          description: >-
              Type of quote being requested
          enum:
            - Close
            - Payment
            - Payoff
        asOfDateTime:
          type: string
          format: date-time
          description: >-
              Date and time the quote should be calculated as of.
    AddTransactionQuoteResponse:
      title: AddTransactionQuoteResponse
      type: object
      properties:
        messages: 
          type: array
          description: >-
              More than one error, warning or informational messages may be
              returned in the response.
          items:
            $ref: '#/components/schemas/Message'
        transaction:
          $ref: '#/components/schemas/Quote'
    GetTransactionQuoteResponse:
      title: GetTransactionQuoteReponse
      type: object
      properties:
        messages: 
          type: array
          description: >-
              More than one error, warning or informational messages may be
              returned in the response.
          items:
            $ref: '#/components/schemas/Message'
        quote:
          $ref: '#/components/schemas/Quote'
   
    Fiserv-OrganizationId:
      type: string
      description: >-
        Organization Identifier is a unique ID that represents the financial institution 
        or holding company.  This ID does not necessarily match the Org ID or Bank ID in 
        the backend system.  To ensure uniqueness across all institutions in all parts 
        of the world, use the Dun and Bradstreet number.
    Fiserv-TransactionId:
      type: string
      description: >-
        Transaction Identifier. This is the transaction UUID of the current 
        message.
    Fiserv-ClientApplicationName:
      type: string
      description: >-
        Name of the application making the service request (e.g. Architect, 
        Commercial Center, etc.).
    Fiserv-Channel:
      type: string
      description: >-
        Indicates the channel used by the client application.
    Fiserv-ClientDateTime:
      type: string
      description: >-
        Client date and time as reported by the client application that is 
        making the service request.
    Fiserv-VendorId:
      type: string
      description: >-
        An identifier, supplied by Fiserv, that represents the vendor using 
        this API service.         
    AccountDetailType:
      title: AccountDetailType
      type: string
      description: >-
          Detail type of account
      enum:
        - Brokerage
        - CertificateOfDeposit
        - Checking
        - Club
        - Commercial
        - Construction
        - Consumer
        - CreditCard
        - DemandDepositLoan
        - Escrow
        - FlexibleSpending
        - FloorPlan
        - GeneralLedger
        - HealthSavings
        - HomeEquity
        - HomeEquityLineOfCredit
        - Installment
        - Lease
        - LineOfCredit
        - Loan
        - MoneyMarket
        - Mortgage
        - Passbook
        - Personal 
        - PortfolioRelationship
        - Retirement
        - Savings
        - ShareDraft
        - Student
    AccountId:
      title: AccountId
      type: string
      description: >-
          Generic identifier that contains no sensitive data and should be 
          utilized as the key within URI when performing RESTful operations
    AccountNumber:
      title: AccountNumber
      type: string
      description: >-
          Actual account number associated with the transaction
    Balance:
      title: Balance
      type: object
      properties:
        type:
          type: string
          description: >-
              Identifies the type of balance being supplied
          enum:
            - AmountDue
            - Available
            - AvailableCredit
            - Closeout
            - Current
            - Ledger
            - Escrow
            - Fee
            - InterestDue
            - Initial
            - LateFee
            - MemoAvailable
            - PayoffAmount
            - Principal
            - Redemption
            - Sweep
        amount:
          type: number
          format: currency
          description: >-
              The value representing the balance being returned
        asOfDate:
          type: string
          format: date
          description: >-
              The date associated to the balance being returned
    BranchCode:
      title: BranchCode
      type: string
      description: >-
          Value assigned to the branch where the transaction was initiated
    DetailItem:
      title: Detail
      type: object
      properties:
        description:
          type: string
          description: >-
              Additional detail of what makes up the amount
        amount:
          type: number
          format: currency
          description: >-
              The value representing the detail amount being returned
    Distribution:
      title: Distribution
      type: object
      properties:
        type:
          type: string
          description: >-
              Identifies the type of balance being supplied
          enum:
            - AmountDue
            - Available
            - AvailableCredit
            - Closeout
            - Current
            - Ledger
            - Escrow
            - Fee
            - InterestDue
            - Initial
            - LateFee
            - MemoAvailable
            - PayoffAmount
            - Principal
            - Redemption
            - Sweep
        amount:
          type: number
          format: currency
          description: >-
              The value representing the balance being returned
        isDebit:
          type: boolean
          default: true
          description: >-
              Is the amount a debit (true) or a credit (false)
        detailItems:
          type: array
          description: >-
              Array of elements that further describe the make-up of the amount
          items:
            $ref: '#/components/schemas/DetailItem'
    ErrorResponse:
      title: ErrorResponse
      type: object
      properties:
        messages: 
          type: array
          description: >-
              More than one error, warning or informational messages may be
              returned in the response.
          items:
            $ref: '#/components/schemas/Message'
    Message:
      title: Message
      required:
        - type
        - title
      type: object
      properties:
        type:
          type: string
          description: >-
              A URI reference [RFC3986] that identifies the problem type
        title:
          type: string 
          description: >-
              A short human-readable summary of the problem type
        detail:
          type: string
          description: >-
              A human-readable description of the specific error  
        instance:
          type: string
          description: >-
              This optional key may be present, with a unique URI for the specific error; 
              this will often point to an error log for that specific response.
    Quote:
      title: Quote
      type: object
      properties:
        accountId:
          $ref: '#/components/schemas/AccountId'
        accountNumber:
          $ref: '#/components/schemas/AccountNumber'
        accountDetailType:
          $ref: '#/components/schemas/AccountDetailType'
        effectiveDateTime:
          type: string
          format: date-time
          description: >-
              Date and time that the calculated quote amount is as of
        currencyCode:
          type: string
          description: >-
              Indicates the currency applied to balances, interest, etc.  Based 
              on ISO-4217 string value; ie USD, EUR 
        distributions:
          type: array
          description: >-
              Amounts associated with the account
          items:
            $ref: '#/components/schemas/Distribution'
    TellerCode:
      title: TellerCode
      type: string
      description: >-
          Value assigned to the teller who initiated the transaction
    Transaction:
      title: Transaction
      required: 
        - amount
        - type
        - currencyCode
        - transactionCode
        - originatedDateTime
      type: object
      properties:
        accountId:
          $ref: '#/components/schemas/AccountId'
        accountNumber:
          $ref: '#/components/schemas/AccountNumber'
        accountDetailType:
          $ref: '#/components/schemas/AccountDetailType'
        type:
          type: string
          description: >-
              Type of transaction being added
          enum:
            - Credit
            - Debit
        amount:
          type: number
          format: currency
          description: >-
              Monetary amount of the transaction
        currencyCode:
          type: string
          description: >-
              Value identifiying which currency the amounts and balances are 
              expressed in.  Value is ISO 4217 currency code, eg USD, EUR,CHF.
        transactionCode:
          type: string
          description: >-
              String that contains the core defined code used to process the
              transaction
        exceptionType:
          type: string
          description: >-
              Exception type related to category
          enum:
            - Adjustment
            - Correction
            - Reversal
            - Waived
        originatedDateTime:
          type: string
          format: date-time
          description: >-
              Date and time of when the transaction was originated
        effectiveDateTime:
          type: string
          format: date-time
          description: >-
              Date and time of when the transaction is effective as of
        description:
          type: string
          description: >-
              Description of the transaction
        memoLine:
          type: string
          description: >-
              User supplied description of what the transaction is associated with
        requestor:
          type: string
          description: >-
              Individual who requested the transaction
        approver:
          type: string
          description: >-
              Individual who approved the transaction
        authorizationKey:
          type: string
          description: >-
            A reference or authorization value supplied by the transaction originator.  
            May be used in matching preauthorized transactions.
        warning:
          $ref: '#/components/schemas/Warning'
    TransactionResult:
      title: TransactionResult
      type: object
      required:
        - status
        - postedDateTime
        - accountId
        - accountNumber
        - accountDetailType
        - currencyCode
      properties:
        id:
          type: string
          description: >-
              Generic identifier of the transaction.  Contains no sensitive data 
              and should be utilized as the key within URI when performing 
              RESTful operations
        status:
          type: string
          description: >-
              Status of the added transaction
          enum:
            - Memo
            - Pending
            - Posted
        accountId:
          $ref: '#/components/schemas/AccountId'
        accountNumber:
          $ref: '#/components/schemas/AccountNumber'
        accountDetailType:
          $ref: '#/components/schemas/AccountDetailType'
        currencyCode:
          type: string
          description: >-
              Value identifiying which currency the amounts and balances are 
              expressed in.  Value is ISO 4217 currency code, eg USD, EUR,CHF.
        description:
          type: string
          description: >-
              Description associated with the processed transaction
        postedDateTime:
          type: string
          format: date-time
          description: >-
              Date and time of when the transaction was posted/processed
        balances:
          type: array
          description: >-
              List of balances associated with transaction
          items:
            $ref: '#/components/schemas/Balance'
        distributions:
          type: array
          description: >-
              List of distributions associated with transaction
          items:
            $ref: '#/components/schemas/Distribution'
            
    Warning:
      title: Warning
      type: object
      required:
        - isSuppressed
      properties:
        isSuppressed:
          type: boolean
          default: false
          description: >-
            Should the warnings associated with the transaction be suppressed/overriden 
            (true) or should the warnings be applied to the transaction
